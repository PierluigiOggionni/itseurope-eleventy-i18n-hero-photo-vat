<!doctype html>
<html lang="{{ lang | default('it') }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ title }} | {{ site.name }}</title>
  <meta name="description" content="{% if description %}{{ description }}{% else %}{% if lang == 'it' %}{{ site.tagline_it }}{% else %}{{ site.tagline_en }}{% endif %}{% endif %}">
  <link rel="preload" href="/assets/styles.css" as="style">
  <link rel="stylesheet" href="/assets/styles.css">
  <link rel="icon" href="/assets/favicon.ico">
  <link rel="apple-touch-icon" href="/assets/apple-touch-icon.png">
  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="{{ title }} | {{ site.name }}">
  <meta property="og:description" content="{% if description %}{{ description }}{% else %}{% if lang == 'it' %}{{ site.tagline_it }}{% else %}{{ site.tagline_en }}{% endif %}{% endif %}">
  <meta property="og:image" content="{{ site.url }}/assets/hero-photo.jpg">
  <link rel="canonical" href="{{ site.url }}{{ page.url }}">
  {# 
{% if lang == 'it' %}
  {% set enAlt = page.url
    | replace('/it/', '/en/')
    | replace('/prodotti/', '/products/')
    | replace('/chi-siamo/', '/about/')
    | replace('/contatti/', '/contact/')
  %}
  <link rel="alternate" hreflang="it" href="{{ site.url }}{{ page.url }}">
  <link rel="alternate" hreflang="en" href="{{ site.url }}{{ enAlt }}">
{% else %}
  {% set itAlt = page.url
    | replace('/en/', '/it/')
    | replace('/products/', '/prodotti/')
    | replace('/about/', '/chi-siamo/')
    | replace('/contact/', '/contatti/')
  %}
  <link rel="alternate" hreflang="en" href="{{ site.url }}{{ page.url }}">
  <link rel="alternate" hreflang="it" href="{{ site.url }}{{ itAlt }}">
{% endif %}
#}
  <!-- JSON-LD LocalBusiness -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"LocalBusiness",
    "name":"{{ site.legalName }}",
    "url":"{{ site.url }}",
    "logo":"{{ site.url }}{{ site.logo }}",
    "image":"{{ site.url }}/assets/hero.jpg",
    "telephone":"{{ site.phone }}",
    "email":"{{ site.email }}",
    "address":{
      "@type":"PostalAddress",
      "streetAddress":"{{ site.address.streetAddress }}",
      "postalCode":"{{ site.address.postalCode }}",
      "addressLocality":"{{ site.address.addressLocality }}",
      "addressRegion":"{{ site.address.addressRegion }}",
      "addressCountry":"{{ site.address.addressCountry }}"
    },

    "openingHours":"{{ site.openingHours }}",
    "geo":{"@type":"GeoCoordinates","latitude":{{ site.geo.latitude }},"longitude":{{ site.geo.longitude }}}
  }
  </script>
</head>
<body>
  <header class="header" role="banner">
    <div class="container" style="display:flex;gap:16px;align-items:center">
      {% if lang == 'it' %}{% set base = '/it/' %}{% else %}{% set base = '/en/' %}{% endif %}
      {% set isHome = page.url == base %}
      {% set isProducts = '/prodotti/' in page.url or '/products/' in page.url %}
      {% set isAbout = '/chi-siamo/' in page.url or '/about/' in page.url %}
      {% set isContact = '/contatti/' in page.url or '/contact/' in page.url %}
      <div class="brand"><a href="{{ base }}" style="color:#fff;text-decoration:none"><img src="/assets/logo.png" alt="{{ site.name }} logo"></a></div>
      <nav class="nav" aria-label="{% if lang == 'it' %}Navigazione principale{% else %}Main navigation{% endif %}">
        <a href="{{ base }}" class="{% if isHome %}active{% endif %}">{% if lang == 'it' %}Home{% else %}Home{% endif %}</a>
        <a href="{{ lang == 'it' and '/it/prodotti/' or '/en/products/' }}" class="{% if isProducts %}active{% endif %}">{% if lang == 'it' %}Prodotti{% else %}Products{% endif %}</a>
        <a href="{{ lang == 'it' and '/it/chi-siamo/' or '/en/about/' }}" class="{% if isAbout %}active{% endif %}">{% if lang == 'it' %}Chi siamo{% else %}About{% endif %}</a>
        <a href="{{ lang == 'it' and '/it/contatti/' or '/en/contact/' }}" class="{% if isContact %}active{% endif %}">{% if lang == 'it' %}Contatti{% else %}Contact{% endif %}</a>
      </nav>
      <div class="lang">
        <span class="visually-hidden">{% if lang == 'it' %}Selezione lingua{% else %}Language selection{% endif %}</span>
        {% if lang == 'it' %}
          {% set enAlt = page.url
            | replace('/it/', '/en/')
            | replace('/prodotti/', '/products/')
            | replace('/chi-siamo/', '/about/')
            | replace('/contatti/', '/contact/')
          %}
          <a href="{{ enAlt }}" class="badge" hreflang="en" lang="en" rel="alternate">EN</a>
        {% else %}
          {% set itAlt = page.url
            | replace('/en/', '/it/')
            | replace('/products/', '/prodotti/')
            | replace('/about/', '/chi-siamo/')
            | replace('/contact/', '/contatti/')
          %}
          <a href="{{ itAlt }}" class="badge" hreflang="it" lang="it" rel="alternate">IT</a>
        {% endif %}
      </div>
    </div>
  </header>

  <main id="main" class="container" role="main">
    {{ content | safe }}
  </main>

<footer class="footer" role="contentinfo">
  <div class="container">
    <p>
      &copy; <span>{{ site.year }}</span> ITS Europe S.r.l. · 
      Sede legale: Via Masano 22/A, 24047 Treviglio (BG) · <br>
      Capitale sociale: 10.000,00 · 
      Numero REA: BG - 347616 · <br>
      CF e numero di iscrizione al Registro delle Imprese: 03077920167 · 
      PI: 03077920167
    </p>
    <p>
      {% if lang == 'it' %}
        Tutti i diritti riservati.
      {% else %}
        All rights reserved.
      {% endif %}
    </p>
  </div>
</footer>
</body>
</html>
